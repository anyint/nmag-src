# Nmag micromagnetic simulator
# Copyright (C) 2011 University of Southampton
# Hans Fangohr, Thomas Fischbacher, Matteo Franchin and others
#
# WEB:     http://nmag.soton.ac.uk 
# CONTACT: nmag@soton.ac.uk
#
# AUTHOR(S) OF THIS FILE: Matteo Franchin
# LICENSE: GNU General Public License 2.0
#          (see <http://www.gnu.org/licenses/>)

.PHONY: all install uninstall clean

INSTALL=@INSTALL@
INSTALL_SCRIPT=@INSTALL_SCRIPT@

NSIM_EXECS=nsim-raw nsim nmeshpp ncol nmagpp nmeshimport nmagprobe \
  nsimversion nsim_i nmagpp_pre0_1_5000

# Rule to make executables from the corresponding .in files
%: %.in
	@SRCDIR@/src/nsimexec @SRCDIR@/subst.py $< $@
	 chmod u+x $@

all: 

install: $(NSIM_EXECS)
	@if test "@DO_INSTALL@" = "1"; then \
	  list='$(NSIM_EXECS)'; for file in $$list; do \
	    echo "@INSTALL_SCRIPT@ $$file @BINDIR@"; \
	    @INSTALL_SCRIPT@ $$file @BINDIR@; \
	  done; \
	fi

uninstall:
	@if test "@DO_INSTALL@" = "1"; then \
	  list='$(NSIM_EXECS)'; for file in $$list; do \
	    echo "rm -f @BINDIR@/$$file;"; \
	    rm -f $$file @BINDIR@/$$file; \
	  done; \
	fi

clean:
	rm -f $(NSIM_EXECS)
